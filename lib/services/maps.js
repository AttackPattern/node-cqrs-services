"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _maxSafeInteger=require("babel-runtime/core-js/number/max-safe-integer"),_maxSafeInteger2=_interopRequireDefault(_maxSafeInteger),_regenerator=require("babel-runtime/regenerator"),_regenerator2=_interopRequireDefault(_regenerator),_asyncToGenerator2=require("babel-runtime/helpers/asyncToGenerator"),_asyncToGenerator3=_interopRequireDefault(_asyncToGenerator2),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),Maps=function e(r){var t=this;(0,_classCallCheck3.default)(this,e),this.getPosition=function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(r){var a,n;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.googleMaps.geocode({address:r}).asPromise();case 3:return a=e.sent,n=a.json.results[0],e.abrupt("return",n&&{address:n.formatted_address,latitude:n.geometry.location.lat,longitude:n.geometry.location.lng});case 8:throw e.prev=8,e.t0=e.catch(0),console.log("Failed call to Google Maps: GeoCode",e.t0),e.t0;case 12:case"end":return e.stop()}},e,t,[[0,8]])}));return function(r){return e.apply(this,arguments)}}(),this.getResponseTimes=function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(r,a){var n,o;return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.map(function(e){return e.position}),e.next=3,t._lookupTimes(r,n);case 3:return o=e.sent,e.abrupt("return",a.map(function(e,r){return{responder:e,duration:o[r]}}));case 5:case"end":return e.stop()}},e,t)}));return function(r,t){return e.apply(this,arguments)}}(),this._lookupTimes=function(){var e=(0,_asyncToGenerator3.default)(_regenerator2.default.mark(function e(r){var a,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return _regenerator2.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.prev=2,e.next=5,t.googleMaps.distanceMatrix({units:"imperial",origins:n.map(function(e){return{lat:e.latitude,lng:e.longitude}}),destinations:[r]}).asPromise();case 5:return a=e.sent,e.abrupt("return",a.json.rows.map(function(e){return e.elements[0]&&e.elements[0].duration&&e.elements[0].duration.value||_maxSafeInteger2.default}));case 9:e.prev=9,e.t0=e.catch(2),console.log("Failed call to Google Maps: Distance Matrix",e.t0);case 12:return e.abrupt("return",[]);case 13:case"end":return e.stop()}},e,t,[[2,9]])}));return function(r){return e.apply(this,arguments)}}(),this.googleMaps=r};exports.default=Maps,module.exports=exports.default;
//# sourceMappingURL=../maps/services/maps.js.map
