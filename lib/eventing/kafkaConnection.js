"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require("babel-runtime/helpers/createClass"),_createClass3=_interopRequireDefault(_createClass2),_kafkaNode=require("kafka-node"),KafkaConnection=function(){function e(r){var t=this,n=r.storeUrl,c=void 0===n?"":n,o=r.clientId,a=void 0===o?"":o;(0,_classCallCheck3.default)(this,e),this.producer=function(){return t.currentProducer},this.connect=function(){console.log("connecting to "+c+" "+a),t.currentProducer&&t.currentProducer.close(),t.client=new _kafkaNode.Client(c,a+"-"+process.pid),t.currentProducer=new _kafkaNode.HighLevelProducer(t.client,{partitionerType:3}),t.currentProducer.on("error",function(){return setTimeout(function(){return t.connect()},500)}),t.client.refreshMetadata(["position"],function(){})},this.connect()}return(0,_createClass3.default)(e,[{key:"close",value:function(){this.client.close()}}]),e}();exports.default=KafkaConnection,module.exports=exports.default;
//# sourceMappingURL=../maps/eventing/kafkaConnection.js.map
