"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _extends2=require("babel-runtime/helpers/extends"),_extends3=_interopRequireDefault(_extends2),_stringify=require("babel-runtime/core-js/json/stringify"),_stringify2=_interopRequireDefault(_stringify),_objectWithoutProperties2=require("babel-runtime/helpers/objectWithoutProperties"),_objectWithoutProperties3=_interopRequireDefault(_objectWithoutProperties2),_classCallCheck2=require("babel-runtime/helpers/classCallCheck"),_classCallCheck3=_interopRequireDefault(_classCallCheck2),EventMapper=function e(t,r){(0,_classCallCheck3.default)(this,e),_initialiseProps.call(this),this.aggregate=t,this.events=r},_initialiseProps=function(){var e=this;this.toStoredEvent=function(t){var r=(t.aggregate,t.aggregateId),i=t.type,a=t.sequenceNumber,s=(t.timestamp,t.actor),o=(t.position,(0,_objectWithoutProperties3.default)(t,["aggregate","aggregateId","type","sequenceNumber","timestamp","actor","position"]));return{aggregate:e.aggregate,aggregateId:r,type:i||name,sequenceNumber:a,position:(0,_stringify2.default)(t.position),actor:s,body:(0,_stringify2.default)(o)}},this.fromStoredEvent=function(t){var r=e.events[t.type];return new r((0,_extends3.default)({aggregate:t.aggregate,aggregateId:t.aggregateId,timestamp:t.timestamp,type:t.type,sequenceNumber:t.sequenceNumber,actor:t.actor,position:JSON.parse(t.position||null)},JSON.parse(t.body)))}};exports.default=EventMapper,module.exports=exports.default;
//# sourceMappingURL=../maps/eventing/eventMapper.js.map
