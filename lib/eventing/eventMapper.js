"use strict";function _extends(){return _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_extends.apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var EventMapper=function e(t,r){_classCallCheck(this,e),_initialiseProps.call(this),this.aggregate=t,this.events=r};exports.default=EventMapper;var _initialiseProps=function(){var e=this;Object.defineProperty(this,"toStoredEvent",{configurable:!0,enumerable:!0,writable:!0,value:function(t){var r=(t.aggregate,t.aggregateId),a=t.type,n=t.sequenceNumber,o=(t.timestamp,t.actor),i=(t.position,_objectWithoutProperties(t,["aggregate","aggregateId","type","sequenceNumber","timestamp","actor","position"]));return{aggregate:e.aggregate,aggregateId:r,type:a||name,sequenceNumber:n,position:JSON.stringify(t.position),actor:o,body:JSON.stringify(i)}}}),Object.defineProperty(this,"fromStoredEvent",{configurable:!0,enumerable:!0,writable:!0,value:function(t){try{var r=e.events[t.type];return new r(_extends({aggregate:t.aggregate,aggregateId:t.aggregateId,timestamp:t.timestamp,type:t.type,sequenceNumber:t.sequenceNumber,actor:t.actor,position:JSON.parse(t.position||null)},JSON.parse(t.body)))}catch(e){throw console.log("Failed to map event ".concat(t.type," ").concat(t.sequenceNumber)),e}}})};
//# sourceMappingURL=../maps/eventing/eventMapper.js.map
